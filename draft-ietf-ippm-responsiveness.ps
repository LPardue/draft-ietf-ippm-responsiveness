%!PS-Adobe-3.0
%%BoundingBox: 24 24 571 818
%%Title: Enscript Output
%%For: felix,,,
%%Creator: GNU Enscript 1.6.6
%%CreationDate: Thu Mar 16 16:40:05 2023
%%Orientation: Portrait
%%Pages: (atend)
%%DocumentMedia: A4 595 842 0 () ()
%%DocumentNeededResources: (atend)
%%EndComments
%%BeginProlog
%%BeginResource: procset Enscript-Prolog 1.6 6
%
% Procedures.
%

/_S {	% save current state
  /_s save def
} def
/_R {	% restore from saved state
  _s restore
} def

/S {	% showpage protecting gstate
  gsave
  showpage
  grestore
} bind def

/MF {	% fontname newfontname -> -	make a new encoded font
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  % insert only valid encoding vectors
  encoding_vector length 256 eq {
    newfont /Encoding encoding_vector put
  } if

  newfontname newfont definefont pop
} def

/MF_PS { % fontname newfontname -> -	make a new font preserving its enc
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  newfontname newfont definefont pop
} def

/SF { % fontname width height -> -	set a new font
  /height exch def
  /width exch def

  findfont
  [width 0 0 height 0 0] makefont setfont
} def

/SUF { % fontname width height -> -	set a new user font
  /height exch def
  /width exch def

  /F-gs-user-font MF
  /F-gs-user-font width height SF
} def

/SUF_PS { % fontname width height -> -	set a new user font preserving its enc
  /height exch def
  /width exch def

  /F-gs-user-font MF_PS
  /F-gs-user-font width height SF
} def

/M {moveto} bind def
/s {show} bind def

/Box {	% x y w h -> -			define box path
  /d_h exch def /d_w exch def /d_y exch def /d_x exch def
  d_x d_y  moveto
  d_w 0 rlineto
  0 d_h rlineto
  d_w neg 0 rlineto
  closepath
} def

/bgs {	% x y height blskip gray str -> -	show string with bg color
  /str exch def
  /gray exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    gray setgray
    fill
  grestore
  x y M str s
} def

/bgcs { % x y height blskip red green blue str -> -  show string with bg color
  /str exch def
  /blue exch def
  /green exch def
  /red exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    red green blue setrgbcolor
    fill
  grestore
  x y M str s
} def

% Highlight bars.
/highlight_bars {	% nlines lineheight output_y_margin gray -> -
  gsave
    setgray
    /ymarg exch def
    /lineheight exch def
    /nlines exch def

    % This 2 is just a magic number to sync highlight lines to text.
    0 d_header_y ymarg sub 2 sub translate

    /cw d_output_w cols div def
    /nrows d_output_h ymarg 2 mul sub lineheight div cvi def

    % for each column
    0 1 cols 1 sub {
      cw mul /xp exch def

      % for each rows
      0 1 nrows 1 sub {
        /rn exch def
        rn lineheight mul neg /yp exch def
        rn nlines idiv 2 mod 0 eq {
	  % Draw highlight bar.  4 is just a magic indentation.
	  xp 4 add yp cw 8 sub lineheight neg Box fill
	} if
      } for
    } for

  grestore
} def

% Line highlight bar.
/line_highlight {	% x y width height gray -> -
  gsave
    /gray exch def
    Box gray setgray fill
  grestore
} def

% Column separator lines.
/column_lines {
  gsave
    .1 setlinewidth
    0 d_footer_h translate
    /cw d_output_w cols div def
    1 1 cols 1 sub {
      cw mul 0 moveto
      0 d_output_h rlineto stroke
    } for
  grestore
} def

% Column borders.
/column_borders {
  gsave
    .1 setlinewidth
    0 d_footer_h moveto
    0 d_output_h rlineto
    d_output_w 0 rlineto
    0 d_output_h neg rlineto
    closepath stroke
  grestore
} def

% Do the actual underlay drawing
/draw_underlay {
  ul_style 0 eq {
    ul_str true charpath stroke
  } {
    ul_str show
  } ifelse
} def

% Underlay
/underlay {	% - -> -
  gsave
    0 d_page_h translate
    d_page_h neg d_page_w atan rotate

    ul_gray setgray
    ul_font setfont
    /dw d_page_h dup mul d_page_w dup mul add sqrt def
    ul_str stringwidth pop dw exch sub 2 div ul_h_ptsize -2 div moveto
    draw_underlay
  grestore
} def

/user_underlay {	% - -> -
  gsave
    ul_x ul_y translate
    ul_angle rotate
    ul_gray setgray
    ul_font setfont
    0 0 ul_h_ptsize 2 div sub moveto
    draw_underlay
  grestore
} def

% Page prefeed
/page_prefeed {		% bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} def

% Wrapped line markers
/wrapped_line_mark {	% x y charwith charheight type -> -
  /type exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  type 2 eq {
    % Black boxes (like TeX does)
    gsave
      0 setlinewidth
      x w 4 div add y M
      0 h rlineto w 2 div 0 rlineto 0 h neg rlineto
      closepath fill
    grestore
  } {
    type 3 eq {
      % Small arrows
      gsave
        .2 setlinewidth
        x w 2 div add y h 2 div add M
        w 4 div 0 rlineto
        x w 4 div add y lineto stroke

        x w 4 div add w 8 div add y h 4 div add M
        x w 4 div add y lineto
	w 4 div h 8 div rlineto stroke
      grestore
    } {
      % do nothing
    } ifelse
  } ifelse
} def

% EPSF import.

/BeginEPSF {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack
  userdict begin
  /showpage { } def
  0 setgray 0 setlinecap
  1 setlinewidth 0 setlinejoin
  10 setmiterlimit [ ] 0 setdash newpath
  /languagelevel where {
    pop languagelevel
    1 ne {
      false setstrokeadjust false setoverprint
    } if
  } if
} bind def

/EndEPSF {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse
%%EndResource
%%BeginResource: procset Enscript-Encoding-88591 1.6 6
/encoding_vector [
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclam       	/quotedbl     	/numbersign   	
/dollar       	/percent      	/ampersand    	/quoteright   	
/parenleft    	/parenright   	/asterisk     	/plus         	
/comma        	/hyphen       	/period       	/slash        	
/zero         	/one          	/two          	/three        	
/four         	/five         	/six          	/seven        	
/eight        	/nine         	/colon        	/semicolon    	
/less         	/equal        	/greater      	/question     	
/at           	/A            	/B            	/C            	
/D            	/E            	/F            	/G            	
/H            	/I            	/J            	/K            	
/L            	/M            	/N            	/O            	
/P            	/Q            	/R            	/S            	
/T            	/U            	/V            	/W            	
/X            	/Y            	/Z            	/bracketleft  	
/backslash    	/bracketright 	/asciicircum  	/underscore   	
/quoteleft    	/a            	/b            	/c            	
/d            	/e            	/f            	/g            	
/h            	/i            	/j            	/k            	
/l            	/m            	/n            	/o            	
/p            	/q            	/r            	/s            	
/t            	/u            	/v            	/w            	
/x            	/y            	/z            	/braceleft    	
/bar          	/braceright   	/tilde        	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclamdown   	/cent         	/sterling     	
/currency     	/yen          	/brokenbar    	/section      	
/dieresis     	/copyright    	/ordfeminine  	/guillemotleft	
/logicalnot   	/hyphen       	/registered   	/macron       	
/degree       	/plusminus    	/twosuperior  	/threesuperior	
/acute        	/mu           	/paragraph    	/bullet       	
/cedilla      	/onesuperior  	/ordmasculine 	/guillemotright	
/onequarter   	/onehalf      	/threequarters	/questiondown 	
/Agrave       	/Aacute       	/Acircumflex  	/Atilde       	
/Adieresis    	/Aring        	/AE           	/Ccedilla     	
/Egrave       	/Eacute       	/Ecircumflex  	/Edieresis    	
/Igrave       	/Iacute       	/Icircumflex  	/Idieresis    	
/Eth          	/Ntilde       	/Ograve       	/Oacute       	
/Ocircumflex  	/Otilde       	/Odieresis    	/multiply     	
/Oslash       	/Ugrave       	/Uacute       	/Ucircumflex  	
/Udieresis    	/Yacute       	/Thorn        	/germandbls   	
/agrave       	/aacute       	/acircumflex  	/atilde       	
/adieresis    	/aring        	/ae           	/ccedilla     	
/egrave       	/eacute       	/ecircumflex  	/edieresis    	
/igrave       	/iacute       	/icircumflex  	/idieresis    	
/eth          	/ntilde       	/ograve       	/oacute       	
/ocircumflex  	/otilde       	/odieresis    	/divide       	
/oslash       	/ugrave       	/uacute       	/ucircumflex  	
/udieresis    	/yacute       	/thorn        	/ydieresis    	
] def
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Courier
/HFpt_w 10 def
/HFpt_h 10 def
/Courier-Bold /HF-gs-font MF
/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def
/Courier /F-gs-font MF
/F-gs-font 10 10 SF
/#copies 1 def
% Pagedevice definitions:
gs_languagelevel 1 gt {
  <<
    /PageSize [595 842] 
  >> setpagedevice
} if
/d_page_w 547 def
/d_page_h 794 def
/d_header_x 0 def
/d_header_y 794 def
/d_header_w 547 def
/d_header_h 0 def
/d_footer_x 0 def
/d_footer_y 0 def
/d_footer_w 547 def
/d_footer_h 0 def
/d_output_w 547 def
/d_output_h 794 def
/cols 1 def
%%EndSetup
%%Page: (1) 1
%%BeginPageSetup
_S
24 24 translate
/pagenum 1 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 737 M
(IP Performance Measurement                                     C. Paasch) s
5 726 M
(Internet-Draft                                                  R. Meyer) s
5 715 M
(Intended status: Standards Track                             S. Cheshire) s
5 704 M
(Expires: 17 September 2023                                    Apple Inc.) s
5 693 M
(                                                              W. Hawkins) s
5 682 M
(                                                University of Cincinnati) s
5 671 M
(                                                           16 March 2023) s
5 638 M
(                Responsiveness under Working Conditions) s
5 627 M
(                   draft-ietf-ippm-responsiveness-02) s
5 605 M
(Abstract) s
5 583 M
(   For many years, a lack of responsiveness, variously called lag,) s
5 572 M
(   latency, or bufferbloat, has been recognized as an unfortunate, but) s
5 561 M
(   common, symptom in today's networks.  Even after a decade of work on) s
5 550 M
(   standardizing technical solutions, it remains a common problem for) s
5 539 M
(   the end users.) s
5 517 M
(   Everyone "knows" that it is "normal" for a video conference to have) s
5 506 M
(   problems when somebody else at home is watching a 4K movie or) s
5 495 M
(   uploading photos from their phone.  However, there is no technical) s
5 484 M
(   reason for this to be the case.  In fact, various queue management) s
5 473 M
(   solutions have solved the problem.) s
5 451 M
(   Our networks remain unresponsive, not from a lack of technical) s
5 440 M
(   solutions, but rather a lack of awareness of the problem and) s
5 429 M
(   deployment of its solutions.  We believe that creating a tool that) s
5 418 M
(   measures the problem and matches people's everyday experience will) s
5 407 M
(   create the necessary awareness, and result in a demand for solutions.) s
5 385 M
(   This document specifies the "Responsiveness Test" for measuring) s
5 374 M
(   responsiveness.  It uses common protocols and mechanisms to measure) s
5 363 M
(   user experience specifically when the network is under working) s
5 352 M
(   conditions.  The measurement is expressed as "Round-trips Per Minute") s
5 341 M
(   \(RPM\) and should be included with throughput \(up and down\) and idle) s
5 330 M
(   latency as critical indicators of network quality.) s
5 308 M
(Status of This Memo) s
5 286 M
(   This Internet-Draft is submitted in full conformance with the) s
5 275 M
(   provisions of BCP 78 and BCP 79.) s
5 253 M
(   Internet-Drafts are working documents of the Internet Engineering) s
5 242 M
(   Task Force \(IETF\).  Note that other groups may also distribute) s
5 231 M
(   working documents as Internet-Drafts.  The list of current Internet-) s
5 220 M
(   Drafts is at https://datatracker.ietf.org/drafts/current/.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 1]) s
_R
S
%%Page: (2) 2
%%BeginPageSetup
_S
24 24 translate
/pagenum 2 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   Internet-Drafts are draft documents valid for a maximum of six months) s
5 726 M
(   and may be updated, replaced, or obsoleted by other documents at any) s
5 715 M
(   time.  It is inappropriate to use Internet-Drafts as reference) s
5 704 M
(   material or to cite them other than as "work in progress.") s
5 682 M
(   This Internet-Draft will expire on 17 September 2023.) s
5 660 M
(Copyright Notice) s
5 638 M
(   Copyright \(c\) 2023 IETF Trust and the persons identified as the) s
5 627 M
(   document authors.  All rights reserved.) s
5 605 M
(   This document is subject to BCP 78 and the IETF Trust's Legal) s
5 594 M
(   Provisions Relating to IETF Documents \(https://trustee.ietf.org/) s
5 583 M
(   license-info\) in effect on the date of publication of this document.) s
5 572 M
(   Please review these documents carefully, as they describe your rights) s
5 561 M
(   and restrictions with respect to this document.  Code Components) s
5 550 M
(   extracted from this document must include Revised BSD License text as) s
5 539 M
(   described in Section 4.e of the Trust Legal Provisions and are) s
5 528 M
(   provided without warranty as described in the Revised BSD License.) s
5 506 M
(Table of Contents) s
5 484 M
(   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3) s
5 473 M
(     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3) s
5 462 M
(   2.  Design Constraints  . . . . . . . . . . . . . . . . . . . . .   4) s
5 451 M
(   3.  Goals . . . . . . . . . . . . . . . . . . . . . . . . . . . .   6) s
5 440 M
(   4.  Measuring Responsiveness Under Working Conditions . . . . . .   6) s
5 429 M
(     4.1.  Working Conditions  . . . . . . . . . . . . . . . . . . .   6) s
5 418 M
(       4.1.1.  Single-flow vs multi-flow . . . . . . . . . . . . . .   7) s
5 407 M
(       4.1.2.  Parallel vs Sequential Uplink and Downlink  . . . . .   8) s
5 396 M
(       4.1.3.  Achieving Full Buffer Utilization . . . . . . . . . .   9) s
5 385 M
(     4.2.  Test parameters . . . . . . . . . . . . . . . . . . . . .   9) s
5 374 M
(     4.3.  Measuring Responsiveness  . . . . . . . . . . . . . . . .  10) s
5 363 M
(       4.3.1.  Aggregating the Measurements  . . . . . . . . . . . .  12) s
5 352 M
(     4.4.  Final Algorithm . . . . . . . . . . . . . . . . . . . . .  13) s
5 341 M
(       4.4.1.  Confidence of test-results  . . . . . . . . . . . . .  14) s
5 330 M
(   5.  Interpreting responsiveness results . . . . . . . . . . . . .  15) s
5 319 M
(     5.1.  Elements influencing responsiveness . . . . . . . . . . .  15) s
5 308 M
(       5.1.1.  Client side influence . . . . . . . . . . . . . . . .  15) s
5 297 M
(       5.1.2.  Network influence . . . . . . . . . . . . . . . . . .  16) s
5 286 M
(       5.1.3.  Server side influence . . . . . . . . . . . . . . . .  16) s
5 275 M
(     5.2.  Root-causing Responsiveness . . . . . . . . . . . . . . .  16) s
5 264 M
(   6.  Responsiveness Test Server API  . . . . . . . . . . . . . . .  17) s
5 253 M
(   7.  Responsiveness Test Server Discovery  . . . . . . . . . . . .  19) s
5 242 M
(     7.1.  Well-Known Uniform Resource Identifier \(URI\) For Test) s
5 231 M
(           Server Discovery  . . . . . . . . . . . . . . . . . . . .  19) s
5 220 M
(     7.2.  DNS-Based Service Discovery for Test Server Discovery . .  20) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 2]) s
_R
S
%%Page: (3) 3
%%BeginPageSetup
_S
24 24 translate
/pagenum 3 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(       7.2.1.  Example . . . . . . . . . . . . . . . . . . . . . . .  21) s
5 726 M
(   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  21) s
5 715 M
(   9.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  21) s
5 704 M
(   10. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .  21) s
5 693 M
(   11. Informative References  . . . . . . . . . . . . . . . . . . .  21) s
5 682 M
(   Appendix A.  Example Server Configuration . . . . . . . . . . . .  23) s
5 671 M
(     A.1.  Apache Traffic Server . . . . . . . . . . . . . . . . . .  23) s
5 660 M
(   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  23) s
5 638 M
(1.  Introduction) s
5 616 M
(   For many years, a lack of responsiveness, variously called lag,) s
5 605 M
(   latency, or bufferbloat, has been recognized as an unfortunate, but) s
5 594 M
(   common, symptom in today's networks [Bufferbloat].  Solutions like) s
5 583 M
(   fq_codel [RFC8290], PIE [RFC8033] or L4S [RFC9330] have been) s
5 572 M
(   standardized and are to some extent widely implemented.) s
5 561 M
(   Nevertheless, people still suffer from bufferbloat.) s
5 539 M
(   Although significant, the impact on user experience can be transitory) s
5 528 M
(   -- that is, its effect is not always visible to the user.  Whenever a) s
5 517 M
(   network is actively being used at its full capacity, buffers can fill) s
5 506 M
(   up and create latency for traffic.  The duration of those full) s
5 495 M
(   buffers may be brief: a medium-sized file transfer, like an email) s
5 484 M
(   attachment or uploading photos, can create bursts of latency spikes.) s
5 473 M
(   An example of this is lag occurring during a videoconference, where a) s
5 462 M
(   connection is briefly shown as unstable.) s
5 440 M
(   These short-lived disruptions make it hard to narrow down the cause.) s
5 429 M
(   We believe that it is necessary to create a standardized way to) s
5 418 M
(   measure and express responsiveness.) s
5 396 M
(   Including the responsiveness-under-working-conditions test among) s
5 385 M
(   other measurements of network quality \(e.g., throughput and idle) s
5 374 M
(   latency\) would raise awareness of the problem and establish the) s
5 363 M
(   expectation among users that their network providers deploy) s
5 352 M
(   solutions.) s
5 330 M
(1.1.  Terminology) s
5 308 M
(   A word about the term "bufferbloat" -- the undesirable latency that) s
5 297 M
(   comes from a router or other network equipment buffering too much) s
5 286 M
(   data.  This document uses the term as a general description of bad) s
5 275 M
(   latency, using more precise wording where warranted.) s
5 253 M
(   "Latency" is a poor measure of responsiveness, because it can be hard) s
5 242 M
(   for the general public to understand.  The units are unfamiliar) s
5 231 M
(   \("what is a millisecond?"\) and counterintuitive \("100 msec -- that) s
5 220 M
(   sounds good -- it's only a tenth of a second!"\).) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 3]) s
_R
S
%%Page: (4) 4
%%BeginPageSetup
_S
24 24 translate
/pagenum 4 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   Instead, we define the term "responsiveness under working conditions") s
5 726 M
(   to make it clear that we are measuring all, not just idle,) s
5 715 M
(   conditions, and use "round-trips per minute" as the unit.  The) s
5 704 M
(   advantage of using round-trips per minute as the unit are two-fold:) s
5 693 M
(   First, it allows for a unit that is "the higher the better".  This) s
5 682 M
(   kind of unit is often more intuitive for end-users.  Second, the) s
5 671 M
(   range of the values tends to be around the 4-digit integer range) s
5 660 M
(   which is also a value easy to compare and read, again allowing for a) s
5 649 M
(   more intuitive use.  Finally, we abbreviate the unit to "RPM", a wink) s
5 638 M
(   to the "revolutions per minute" that we use for car engines.) s
5 616 M
(   This document defines an algorithm for the "Responsiveness Test" that) s
5 605 M
(   explicitly measures responsiveness under working conditions.) s
5 583 M
(2.  Design Constraints) s
5 561 M
(   There are many challenges to defining measurements of the Internet:) s
5 550 M
(   the dynamic nature of the Internet, the diverse nature of the) s
5 539 M
(   traffic, the large number of devices that affect traffic, the) s
5 528 M
(   difficulty of attaining appropriate measurement conditions, diurnal) s
5 517 M
(   traffic patterns, and changing routes.) s
5 495 M
(   In order to minimize the effects of these challenges, it's best to) s
5 484 M
(   keep the test duration relatively short.) s
5 462 M
(   TCP and UDP traffic, or traffic on ports 80 and 443, may take) s
5 451 M
(   significantly different paths over the network between source and) s
5 440 M
(   destination and be subject to entirely different Quality of Service) s
5 429 M
(   \(QoS\) treatment.  A good test will use standard transport-layer) s
5 418 M
(   traffic -- typical for people's use of the network -- that is subject) s
5 407 M
(   to the transport layer's congestion control algorithms that might) s
5 396 M
(   reduce the traffic's rate and thus its buffering in the network.) s
5 374 M
(   Traditionally, one thinks of bufferbloat happening in the network,) s
5 363 M
(   i.e., on routers and switches of the Internet.  However, the) s
5 352 M
(   networking stacks of the clients and servers can have huge buffers.) s
5 341 M
(   Data sitting in TCP sockets or waiting for the application to send or) s
5 330 M
(   read causes artificial latency, and affects user experience the same) s
5 319 M
(   way as in-network bufferbloat.) s
5 297 M
(   Finally, it is crucial to recognize that significant queueing only) s
5 286 M
(   happens on entry to the lowest-capacity \(or \342\\200\\234bottleneck\342\\200\\235\) hop on a) s
5 275 M
(   network path.  For any flow of data between two endpoints there is) s
5 264 M
(   always one hop along the path where the capacity available to that) s
5 253 M
(   flow at that hop is the lowest among all the hops of that flow\342\\200\\231s path) s
5 242 M
(   at that moment in time.  It is important to understand that the) s
5 231 M
(   existence of a lowest-capacity hop on a network path and a buffer to) s
5 220 M
(   smooth bursts of data is not itself a problem.  In a heterogeneous) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 4]) s
_R
S
%%Page: (5) 5
%%BeginPageSetup
_S
24 24 translate
/pagenum 5 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   network like the Internet it is inevitable that there must) s
5 726 M
(   necessarily be some hop along the path with the lowest capacity for) s
5 715 M
(   that path.  If that hop were to be improved, then some other hop) s
5 704 M
(   would become the new lowest-capacity hop for that path.  In this) s
5 693 M
(   context a \342\\200\\234bottleneck\342\\200\\235 should not be seen as a problem to be fixed,) s
5 682 M
(   because any attempt to \342\\200\\234fix\342\\200\\235 the bottleneck is futile -- such a \342\\200) s
5 671 M
(\\234fix\342\\200\\235) s
5 660 M
(   can never remove the existence of a bottleneck on a path; it just) s
5 649 M
(   moves the bottleneck somewhere else.  Arguably, this heterogeneity of) s
5 638 M
(   the Internet is one of its greatest strengths.  Allowing individual) s
5 627 M
(   technologies to evolve and improve at their own pace, without) s
5 616 M
(   requiring the entire Internet to change in lock-step, has enabled) s
5 605 M
(   enormous improvements over the years in technologies like DSL, cable) s
5 594 M
(   modems, Ethernet, and Wi-Fi, each advancing independently as new) s
5 583 M
(   developments became ready.  As a result of this flexibility we have) s
5 572 M
(   moved incrementally, one step at a time, from 56kb/s dial-up modems) s
5 561 M
(   in the 1990s to Gb/s home Internet service and Gb/s wireless) s
5 550 M
(   connectivity today.) s
5 528 M
(   Note that in a shared datagram network, conditions do not remain) s
5 517 M
(   static.  The hop that is the current bottleneck may change from) s
5 506 M
(   moment to moment.  For example, changes in simultaneous traffic may) s
5 495 M
(   result in changes to a flow\342\\200\\231s share of a given hop.  A user moving) s
5 484 M
(   around may cause the Wi-Fi transmission rate to vary widely, from a) s
5 473 M
(   few Mb/s when far from the Access Point, all the way up to Gb/s or) s
5 462 M
(   more when close to the Access Point.) s
5 440 M
(   Consequently, if we wish to enjoy the benefits of the Internet\342\\200\\231s) s
5 429 M
(   great flexibility, we need software that embraces and celebrates this) s
5 418 M
(   diversity and adapts intelligently to the varying conditions it) s
5 407 M
(   encounters.) s
5 385 M
(   Because significant queueing only happens on entry to the bottleneck) s
5 374 M
(   hop, the queue management at this critical hop of the path almost) s
5 363 M
(   entirely determines the responsiveness of the entire flow.  If the) s
5 352 M
(   bottleneck hop\342\\200\\231s queue management algorithm allows an excessively) s
5 341 M
(   large queue to form, this results in excessively large delays for) s
5 330 M
(   packets sitting in that queue awaiting transmission, significantly) s
5 319 M
(   degrading overall user experience.) s
5 297 M
(   In order to discover the depth of the buffer at the bottleneck hop,) s
5 286 M
(   the proposed Responsiveness Test mimics normal network operations and) s
5 275 M
(   data transfers, with the goal of filling the bottleneck buffer to) s
5 264 M
(   capacity, and then measures the resulting end-to-end latency under) s
5 253 M
(   these so-called working conditions.  A well-managed bottleneck queue) s
5 242 M
(   keeps its occupancy under control, resulting in consistently low) s
5 231 M
(   round-trip times and consistently good responsiveness.  A poorly) s
5 220 M
(   managed bottleneck queue will not.) s
5 165 M
(Paasch, et al.          Expires 17 September 2023               [Page 5]) s
_R
S
%%Page: (6) 6
%%BeginPageSetup
_S
24 24 translate
/pagenum 6 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(3.  Goals) s
5 715 M
(   The algorithm described here defines a Responsiveness Test that) s
5 704 M
(   serves as a good proxy for user experience.  Therefore:) s
5 682 M
(   1.  Because today's Internet traffic primarily uses HTTP/2 over TLS,) s
5 671 M
(       the test's algorithm should use that protocol.) s
5 649 M
(       As a side note: other types of traffic are gaining in popularity) s
5 638 M
(       \(HTTP/3\) and/or are already being used widely \(RTP\).  Traffic) s
5 627 M
(       prioritization and QoS rules on the Internet may subject traffic) s
5 616 M
(       to completely different paths: these could also be measured) s
5 605 M
(       separately.) s
5 583 M
(   2.  Because the Internet is marked by the deployment of countless) s
5 572 M
(       middleboxes like transparent TCP proxies or traffic) s
5 561 M
(       prioritization for certain types of traffic, the Responsiveness) s
5 550 M
(       Test algorithm must take into account their effect on TCP-) s
5 539 M
(       handshake [RFC0793], TLS-handshake, and request/response.) s
5 517 M
(   3.  Because the goal of the test is to educate end users, the results) s
5 506 M
(       should be expressed in an intuitive, nontechnical form and not) s
5 495 M
(       commit the user to spend a significant amount of their time \(we) s
5 484 M
(       target 20 seconds\).) s
5 462 M
(4.  Measuring Responsiveness Under Working Conditions) s
5 440 M
(   Overall, the test to measure responsiveness under working conditions) s
5 429 M
(   proceeds in two steps:) s
5 407 M
(   1.  Put the network connection into "working conditions") s
5 385 M
(   2.  Measure responsiveness of the network.) s
5 363 M
(   The following explains how the former and the latter are achieved.) s
5 341 M
(4.1.  Working Conditions) s
5 319 M
(   What are _the_ conditions that best emulate how a network connection) s
5 308 M
(   is used?  There is no one true answer to this question.  It is a) s
5 297 M
(   tradeoff between using realistic traffic patterns and pushing the) s
5 286 M
(   network to its limits.) s
5 264 M
(   The Responsiveness Test defines working conditions as the condition) s
5 253 M
(   where the path between the measuring endpoints is utilized at its) s
5 242 M
(   end-to-end capacity and the queue at the bottleneck link is at \(or) s
5 231 M
(   beyond\) its maximum occupancy.  Under these conditions, the network) s
5 220 M
(   connection's responsiveness will be at its worst.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 6]) s
_R
S
%%Page: (7) 7
%%BeginPageSetup
_S
24 24 translate
/pagenum 7 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   The Responsiveness Test algorithm for reaching working conditions) s
5 726 M
(   combines multiple standard HTTP transactions with very large data) s
5 715 M
(   objects according to realistic traffic patterns to create these) s
5 704 M
(   conditions.) s
5 682 M
(   This allows to create a stable state of working conditions during) s
5 671 M
(   which the bottleneck of the path between client and server has its) s
5 660 M
(   buffer filled up entirely, without generating DoS-like traffic) s
5 649 M
(   patterns \(e.g., intentional UDP flooding\).  This creates a realistic) s
5 638 M
(   traffic mix representative of what a typical user\342\\200\\231s network) s
5 627 M
(   experiences in normal operation.) s
5 605 M
(   Finally, as end-user usage of the network evolves to newer protocols) s
5 594 M
(   and congestion control algorithms, it is important that the working) s
5 583 M
(   conditions also can evolve to continuously represent a realistic) s
5 572 M
(   traffic pattern.) s
5 550 M
(4.1.1.  Single-flow vs multi-flow) s
5 528 M
(   A single TCP connection may not be sufficient to reach the capacity) s
5 517 M
(   and full buffer occupancy of a path quickly.  Using a 4MB receive) s
5 506 M
(   window, over a network with a 32 ms round-trip time, a single TCP) s
5 495 M
(   connection can achieve up to 1Gb/s throughput.  Additionally, deep) s
5 484 M
(   buffers along the path between the two endpoints may be significantly) s
5 473 M
(   larger than 4MB.  TCP allows larger receive window sizes, up to 1GB.) s
5 462 M
(   However, most transport stacks aggressively limit the size of the) s
5 451 M
(   receive window to avoid consuming too much memory.) s
5 429 M
(   Thus, the only way to achieve full capacity and full buffer occupancy) s
5 418 M
(   on those networks is by creating multiple connections, allowing to) s
5 407 M
(   actively fill the bottleneck's buffer to achieve maximum working) s
5 396 M
(   conditions.) s
5 374 M
(   Even if a single TCP connection would be able to fill the) s
5 363 M
(   bottleneck's buffer, it may take some time for a single TCP) s
5 352 M
(   connection to ramp up to full speed.  One of the goals of the) s
5 341 M
(   Responsiveness Test is to help the user quickly measure their) s
5 330 M
(   network.  As a result, the test must load the network, take its) s
5 319 M
(   measurements, and then finish as fast as possible.) s
5 297 M
(   Finally, traditional loss-based TCP congestion control algorithms) s
5 286 M
(   react aggressively to packet loss by reducing the congestion window.) s
5 275 M
(   This reaction \(intended by the protocol design\) decreases the) s
5 264 M
(   queueing within the network, making it harder to determine the depth) s
5 253 M
(   of the bottleneck queue reliably.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 7]) s
_R
S
%%Page: (8) 8
%%BeginPageSetup
_S
24 24 translate
/pagenum 8 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   The purpose of the Responsiveness Test is not to productively move) s
5 726 M
(   data across the network in a useful way, the way a normal application) s
5 715 M
(   does.  The purpose of the Responsiveness Test is, as quickly as) s
5 704 M
(   possible, to simulate a representative traffic load as if real) s
5 693 M
(   applications were doing sustained data transfers, measure the) s
5 682 M
(   resulting round-trip time occurring under those realistic conditions.) s
5 671 M
(   Because of this, using multiple simultaneous parallel connections) s
5 660 M
(   allows the Responsiveness Test to complete its task more quickly, in) s
5 649 M
(   a way that overall is less disruptive and less wasteful of network) s
5 638 M
(   capacity than a test using a single TCP connection that would take) s
5 627 M
(   longer to bring the bottleneck hop to a stable saturated state.) s
5 605 M
(   In this document, we impose an upper bound on the number of parallel) s
5 594 M
(   load-generating connections to 16.) s
5 572 M
(4.1.2.  Parallel vs Sequential Uplink and Downlink) s
5 550 M
(   Poor responsiveness can be caused by queues in either \(or both\) the) s
5 539 M
(   upstream and the downstream direction.  Furthermore, both paths may) s
5 528 M
(   differ significantly due to access link conditions \(e.g., 5G) s
5 517 M
(   downstream and LTE upstream\) or routing changes within the ISPs.  To) s
5 506 M
(   measure responsiveness under working conditions, the algorithm must) s
5 495 M
(   explore both directions.) s
5 473 M
(   One approach could be to measure responsiveness in the uplink and) s
5 462 M
(   downlink in parallel.  It would allow for a shorter test run-time.) s
5 440 M
(   However, a number of caveats come with measuring in parallel:) s
5 418 M
(   *  Half-duplex links may not permit simultaneous uplink and downlink) s
5 407 M
(      traffic.  This restriction means the test might not reach the) s
5 396 M
(      path's capacity in both directions at once and thus not expose all) s
5 385 M
(      the potential sources of low responsiveness.) s
5 363 M
(   *  Debuggability of the results becomes harder: During parallel) s
5 352 M
(      measurement it is impossible to differentiate whether the observed) s
5 341 M
(      latency happens in the uplink or the downlink direction.) s
5 319 M
(   Thus, we recommend testing uplink and downlink sequentially.) s
5 308 M
(   Parallel testing is considered a future extension.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 8]) s
_R
S
%%Page: (9) 9
%%BeginPageSetup
_S
24 24 translate
/pagenum 9 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(4.1.3.  Achieving Full Buffer Utilization) s
5 715 M
(   The Responsiveness Test gradually increases the number of TCP) s
5 704 M
(   connections \(known as load-generating connections\) and measures) s
5 693 M
(   "goodput" \(the sum of actual data transferred across all connections) s
5 682 M
(   in a unit of time\) continuously.  By definition, once goodput is) s
5 671 M
(   maximized, buffers will start filling up, creating the "standing) s
5 660 M
(   queue" that is characteristic of bufferbloat.  At this moment the) s
5 649 M
(   test starts measuring the responsiveness until it, too, reaches) s
5 638 M
(   saturation.  At this point we are creating the worst-case scenario) s
5 627 M
(   within the limits of the realistic traffic pattern.) s
5 605 M
(   The algorithm notes that throughput increases rapidly until TCP) s
5 594 M
(   connections complete their TCP slow-start phase.  At that point,) s
5 583 M
(   throughput eventually stalls, often due to receive window) s
5 572 M
(   limitations, particularly in cases of high network bandwidth, high) s
5 561 M
(   network round-trip time, low receive window size, or a combination of) s
5 550 M
(   all three.  The only means to further increase throughput is by) s
5 539 M
(   adding more TCP connections to the pool of load-generating) s
5 528 M
(   connections.  If new connections leave the throughput the same, full) s
5 517 M
(   link utilization has been reached.  At this point, adding ore) s
5 506 M
(   connections will allow to achieve full buffer occupancy.) s
5 495 M
(   Responsiveness will gradually decrease from now on, until the buffers) s
5 484 M
(   are entirely full and reach stability of the responsiveness as well.) s
5 462 M
(4.2.  Test parameters) s
5 440 M
(   A number of parameters serve as input to the test methodology.  The) s
5 429 M
(   following lists their acronyms and default values.  Hereafter the) s
5 418 M
(   detailed description of the methodology will explain how these) s
5 407 M
(   parameters are being used.  Experience has shown that these) s
5 396 M
(   parameters allow for a low runtime and accurate results among a wide) s
5 385 M
(   range of environments.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023               [Page 9]) s
_R
S
%%Page: (10) 10
%%BeginPageSetup
_S
24 24 translate
/pagenum 10 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(     +======+==============================================+=========+) s
5 726 M
(     | Name | Explanation                                  | Default |) s
5 715 M
(     |      |                                              | Value   |) s
5 704 M
(     +======+==============================================+=========+) s
5 693 M
(     | MAD  | Moving Average Distance \(number of intervals | 4       |) s
5 682 M
(     |      | to take into account for the moving average\) |         |) s
5 671 M
(     +------+----------------------------------------------+---------+) s
5 660 M
(     | ID   | Interval duration at which the algorithm     | 1       |) s
5 649 M
(     |      | reevaluates stability                        | second  |) s
5 638 M
(     +------+----------------------------------------------+---------+) s
5 627 M
(     | TMP  | Trimmed Mean Percentage to be trimmed        | 95%     |) s
5 616 M
(     +------+----------------------------------------------+---------+) s
5 605 M
(     | SDT  | Standard Deviation Tolerance for stability   | 5%      |) s
5 594 M
(     |      | detection                                    |         |) s
5 583 M
(     +------+----------------------------------------------+---------+) s
5 572 M
(     | MNP  | Maximum number of parallel transport-layer   | 16      |) s
5 561 M
(     |      | connections                                  |         |) s
5 550 M
(     +------+----------------------------------------------+---------+) s
5 539 M
(     | MPS  | Maximum responsiveness probes per second     | 100     |) s
5 528 M
(     +------+----------------------------------------------+---------+) s
5 517 M
(     | PTC  | Percentage of Total Capacity the probes are  | 5%      |) s
5 506 M
(     |      | allowed to consume                           |         |) s
5 495 M
(     +------+----------------------------------------------+---------+) s
5 473 M
(                                  Table 1) s
5 451 M
(4.3.  Measuring Responsiveness) s
5 429 M
(   Measuring responsiveness while achieving working conditions is a) s
5 418 M
(   process of continuous measurement.  It requires a sufficiently large) s
5 407 M
(   sample-size to have confidence in the results.) s
5 385 M
(   The measurement of the responsiveness happens by sending probe-) s
5 374 M
(   requests.  There are two types of probe requests:) s
5 352 M
(   1.  A HTTP GET request on a separate connection \("foreign probes"\).) s
5 341 M
(       This test mimics the time it takes for a web browser to connect) s
5 330 M
(       to a new web server and request the first element of a web page) s
5 319 M
(       \(e.g., "index.html"\), or the startup time for a video streaming) s
5 308 M
(       client to launch and begin fetching media.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 10]) s
_R
S
%%Page: (11) 11
%%BeginPageSetup
_S
24 24 translate
/pagenum 11 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   2.  A HTTP GET request multiplexed on the load-generating connections) s
5 726 M
(       \("self probes"\).  This test mimics the time it takes for a video) s
5 715 M
(       streaming client to skip ahead to a different chapter in the same) s
5 704 M
(       video stream, or for a navigation client to react and fetch new) s
5 693 M
(       map tiles when the user scrolls the map to view a different area.) s
5 682 M
(       In a well functioning system fetching new data over an existing) s
5 671 M
(       connection should take less time than creating a brand new TLS) s
5 660 M
(       connection from scratch to do the same thing.) s
5 638 M
(   Foreign probes will provide 3 sets of data-points.  First, the) s
5 627 M
(   duration of the TCP-handshake \(noted hereafter as tcp_f\).  Second,) s
5 616 M
(   the TLS round-trip-time \(noted tls_f\).  For this, it is important to) s
5 605 M
(   note that different TLS versions have a different number of round-) s
5 594 M
(   trips.  Thus, the TLS establishment time needs to be normalized to) s
5 583 M
(   the number of round-trips the TLS handshake takes until the) s
5 572 M
(   connection is ready to transmit data.  And third, the HTTP elapsed) s
5 561 M
(   time between issuing the GET request for a 1-byte object and) s
5 550 M
(   receiving the entire response \(noted http_f\).) s
5 528 M
(   Self probes will provide a single data-point for the duration of time) s
5 517 M
(   between when the HTTP GET request for the 1-byte object is issued on) s
5 506 M
(   the load-generating connection and the full HTTP response has been) s
5 495 M
(   received \(noted http_s\).) s
5 473 M
(   tcp_f, tls_f, http_f and http_s are all measured in milliseconds.) s
5 451 M
(   The more probes that are sent, the more data available for) s
5 440 M
(   calculation.  In order to generate as much data as possible, the) s
5 429 M
(   Responsiveness Test specifies that a client issue these probes) s
5 418 M
(   regularly.  There is, however, a risk that on low-capacity networks) s
5 407 M
(   the responsiveness probes themselves will consume a significant) s
5 396 M
(   amount of the capacity.  Because the test mandates first saturating) s
5 385 M
(   capacity before probing for responsiveness, we are able to accurately) s
5 374 M
(   estimate how much of the capacity the responsiveness probes will) s
5 363 M
(   consume and never send more probes than the network can handle.) s
5 341 M
(   Limiting the data used by probes can be done by providing an estimate) s
5 330 M
(   of the number of bytes exchanged for a responsiveness probe.  Taking) s
5 319 M
(   TCP and TLS overheads into account, we can estimate the amount of) s
5 308 M
(   data exchanged for a probe on a foreign connection to be around 5000) s
5 297 M
(   bytes.  On load-generating connections we can expect an overhead of) s
5 286 M
(   no more than 1000 bytes.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 11]) s
_R
S
%%Page: (12) 12
%%BeginPageSetup
_S
24 24 translate
/pagenum 12 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   Given this information, we recommend that each responsiveness probing) s
5 726 M
(   interval does not send more than MPS \(Maximum responsiveness Probes) s
5 715 M
(   per Second - default to 100\) probes per second.  The probes should be) s
5 704 M
(   spread out equally over the duration of the interval with an equal) s
5 693 M
(   split between foreign and different load-generating connections.  For) s
5 682 M
(   the probes on load-generating connections, the connection should be) s
5 671 M
(   selected randomly for each probe.) s
5 649 M
(   This would result in a total amount of data per second of 300 KB or) s
5 638 M
(   2400Kb, meaning a total capacity utilization of 2400 Kbps for the) s
5 627 M
(   probing.) s
5 605 M
(   On high-speed networks, this will provide a significant amount of) s
5 594 M
(   samples, while at the same time minimizing the probing overhead.) s
5 583 M
(   However, on severely capacity-constrained networks the probing) s
5 572 M
(   traffic could consume a significant portion of the available) s
5 561 M
(   capacity.  The Responsiveness Test must adjust its probing frequency) s
5 550 M
(   in such a way that the probing traffic does not consume more than PTC) s
5 539 M
(   \(Percentage of Total Capacity - default to 5%\) of the available) s
5 528 M
(   capacity.) s
5 506 M
(4.3.1.  Aggregating the Measurements) s
5 484 M
(   The algorithm produces sets of 4 times for each probe, namely: tcp_f,) s
5 473 M
(   tls_f, http_f, http_l \(from the previous section\).  The) s
5 462 M
(   responsiveness evolves over time as buffers gradually reach) s
5 451 M
(   saturation.  Once the buffers are saturated responsiveness is stable) s
5 440 M
(   over time.  Thus, the aggregation of the measurements considers the) s
5 429 M
(   last MAD \(Moving Average Distance - default to 4\) intervals worth of) s
5 418 M
(   completed responsiveness probes.) s
5 396 M
(   Over the timeframe of these intervals a potentially large number of) s
5 385 M
(   samples has been collected.  These may be affected by noise in the) s
5 374 M
(   measurements, and outliers.  Thus, to aggregate these we suggest to) s
5 363 M
(   use a trimmed mean at the TMP \(Trimmed Mean Percentage - default to) s
5 352 M
(   95%\) percentile, thus providing the following numbers: TM\(tcp_f\),) s
5 341 M
(   TM\(tls_f\), TM\(http_f\), TM\(http_l\).) s
5 319 M
(   The responsiveness is then calculated as the weighted mean:) s
5 297 M
(   Responsiveness = 60000 /) s
5 286 M
(   \(1/6*\(TM\(tcp_f\) + TM\(tls_f\) + TM\(http_f\)\) + 1/2*TM\(http_s\)\)) s
5 264 M
(   This responsiveness value presents round-trips per minute \(RPM\).) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 12]) s
_R
S
%%Page: (13) 13
%%BeginPageSetup
_S
24 24 translate
/pagenum 13 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(4.4.  Final Algorithm) s
5 715 M
(   Considering the previous two sections, where we explain what the) s
5 704 M
(   meaning of working conditions is and the definition of) s
5 693 M
(   responsiveness, we can design the final algorithm.  In order to) s
5 682 M
(   measure the worst-case latency we need to transmit traffic at the) s
5 671 M
(   full capacity of the path as well as ensure the buffers are filled to) s
5 660 M
(   the maximum.  We can achieve this by continuously adding HTTP) s
5 649 M
(   sessions to the pool of connections in a ID \(Interval duration -) s
5 638 M
(   default to 1 second\) interval.  This will ensure that we quickly) s
5 627 M
(   reach capacity and full buffer occupancy.  First, the algorithm) s
5 616 M
(   reaches stability for the goodput.  Once goodput stability has been) s
5 605 M
(   achieved, responsiveness probes are being transmitted until) s
5 594 M
(   responsiveness stability is reached.) s
5 572 M
(   We consider both, goodput and responsiveness to be stable, when the) s
5 561 M
(   standard deviation of the past MAD intervals is within SDT \(Standard) s
5 550 M
(   Deviation Tolerance - default to 5%\) of the last of the moving) s
5 539 M
(   averages.) s
5 517 M
(   The following algorithm reaches working conditions of a network by) s
5 506 M
(   using HTTP/2 upload \(POST\) or download \(GET\) requests of infinitely) s
5 495 M
(   large files.  The algorithm is the same for upload and download and) s
5 484 M
(   uses the same term "load-generating connection" for each.  The) s
5 473 M
(   actions of the algorithm take place at regular intervals.  For the) s
5 462 M
(   current draft the interval is defined as one second.) s
5 440 M
(   Where) s
5 418 M
(   *  i: The index of the current interval.  The variable i is) s
5 407 M
(      initialized to 0 when the algorithm begins and increases by one) s
5 396 M
(      for each interval.) s
5 374 M
(   *  moving average aggregate goodput at interval p: The number of) s
5 363 M
(      total bytes of data transferred within interval p and the MAD - 1) s
5 352 M
(      immediately preceding intervals, divided by MAD times the interval) s
5 341 M
(      duration.) s
5 319 M
(   the steps of the algorithm are:) s
5 297 M
(   *  Create a load-generating connection.) s
5 275 M
(   *  At each interval:) s
5 253 M
(      -  Create an additional load-generating connection.) s
5 231 M
(      -  If goodput has not saturated:) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 13]) s
_R
S
%%Page: (14) 14
%%BeginPageSetup
_S
24 24 translate
/pagenum 14 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(         o  Compute the moving average aggregate goodput at interval i) s
5 726 M
(            as current_average.) s
5 704 M
(         o  If the standard deviation of the past MAD average goodput) s
5 693 M
(            values is less than SDT of the current_average, declare) s
5 682 M
(            saturation and move on to probe responsiveness.) s
5 660 M
(      -  If goodput has saturated:) s
5 638 M
(         o  Compute the responsiveness at interval i as) s
5 627 M
(            current_responsiveness.) s
5 605 M
(         o  If the standard deviation of the past MAD responsiveness) s
5 594 M
(            values is less than SDT of the current_responsiveness,) s
5 583 M
(            declare saturation and report current_responsiveness.) s
5 561 M
(   In Section 3, it is mentioned that one of the goals is that the test) s
5 550 M
(   finishes within 20 seconds.  It is left to the implementation what to) s
5 539 M
(   do when stability is not reached within that time-frame.  For) s
5 528 M
(   example, an implementation might gather a provisional responsiveness) s
5 517 M
(   measurement or let the test run for longer.) s
5 495 M
(   Finally, if at any point one of these connections terminates with an) s
5 484 M
(   error, the test should be aborted.) s
5 462 M
(4.4.1.  Confidence of test-results) s
5 440 M
(   As described above, a tool running the algorithm typically defines a) s
5 429 M
(   time-limit for the execution of each of the stages.  For example, if) s
5 418 M
(   the tool allocates a total run-time of 40 seconds, and it executes a) s
5 407 M
(   full downlink followed by a uplink test, it may allocate 10 seconds) s
5 396 M
(   to each of the saturation-stages \(downlink capacity saturation,) s
5 385 M
(   downlink responsiveness saturation, uplink capacity saturation,) s
5 374 M
(   uplink responsiveness saturation\).) s
5 352 M
(   As the different stages may or may not reach stability, we can define) s
5 341 M
(   a "confidence score" for the different metrics \(capacity and) s
5 330 M
(   responsiveness\) the methodology was able to measure.) s
5 308 M
(   We define "Low" confidence in the result if the algorithm was not) s
5 297 M
(   even able to execute 4 iterations of the specific stage.  Meaning,) s
5 286 M
(   the moving average is not taking the full window into account.) s
5 264 M
(   We define "Medium" confidence if the algorithm was able to execute at) s
5 253 M
(   least 4 iterations, but did not reach stability based on standard) s
5 242 M
(   deviation tolerance.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 14]) s
_R
S
%%Page: (15) 15
%%BeginPageSetup
_S
24 24 translate
/pagenum 15 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   We define "High" confidence if the algorithm was able to fully reach) s
5 726 M
(   stability based on the defined standard deviation tolerance.) s
5 704 M
(   It must be noted that depending on the chosen standard deviation) s
5 693 M
(   tolerance or other paramenters of the methodology and the network-) s
5 682 M
(   environment it may be that a measurement never converges to a stable) s
5 671 M
(   point.  This is expected and part of the dynamic nature of networking) s
5 660 M
(   and the accompanying measurement inaccuracies.  Which is why the) s
5 649 M
(   importance of imposing a time-limit is so crucial, together with an) s
5 638 M
(   accurate depiction of the "confidence" the methodology was able to) s
5 627 M
(   generate.) s
5 605 M
(5.  Interpreting responsiveness results) s
5 583 M
(   The described methodology uses a high-level approach to measure) s
5 572 M
(   responsiveness.  By executing the test with regular HTTP requests a) s
5 561 M
(   number of elements come into play that will influence the result.) s
5 550 M
(   Contrary to more traditional measurement methods the responsiveness) s
5 539 M
(   metric is not only influenced by the properties of the network but) s
5 528 M
(   can significantly be influenced by the properties of the client and) s
5 517 M
(   the server implementations.  This section describes how the different) s
5 506 M
(   elements influence responsiveness and how a user may differentiate) s
5 495 M
(   them when debugging a network.) s
5 473 M
(5.1.  Elements influencing responsiveness) s
5 451 M
(   Due to the HTTP-centric approach of the measurement methodology a) s
5 440 M
(   number of factors come into play that influence the results.  Namely,) s
5 429 M
(   the client-side networking stack \(from the top of the HTTP-layer all) s
5 418 M
(   the way down to the physical layer\), the network \(including potential) s
5 407 M
(   transparent HTTP "accelerators"\), and the server-side networking) s
5 396 M
(   stack.  The following outlines how each of these contributes to the) s
5 385 M
(   responsiveness.) s
5 363 M
(5.1.1.  Client side influence) s
5 341 M
(   As the driver of the measurement, the client-side networking stack) s
5 330 M
(   can have a large influence on the result.  The biggest influence of) s
5 319 M
(   the client comes when measuring the responsiveness in the uplink) s
5 308 M
(   direction.  Load-generation will cause queue-buildup in the transport) s
5 297 M
(   layer as well as the HTTP layer.  Additionally, if the network's) s
5 286 M
(   bottleneck is on the first hop, queue-buildup will happen at the) s
5 275 M
(   layers below the transport stack \(e.g., NIC firmware\).) s
5 253 M
(   Each of these queue build-ups may cause latency and thus low) s
5 242 M
(   responsiveness.  A well designed networking stack would ensure that) s
5 231 M
(   queue-buildup in the TCP layer is kept at a bare minimum with) s
5 220 M
(   solutions like TCP_NOTSENT_LOWAT [draft-ietf-tcpm-rfc793bis].  At the) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 15]) s
_R
S
%%Page: (16) 16
%%BeginPageSetup
_S
24 24 translate
/pagenum 16 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   HTTP/2 layer it is important that the load-generating data is not) s
5 726 M
(   interfering with the latency-measuring probes.  For example, the) s
5 715 M
(   different streams should not be stacked one after the other but) s
5 704 M
(   rather be allowed to be multiplexed for optimal latency.  The queue-) s
5 693 M
(   buildup at these layers would only influence latency on the probes) s
5 682 M
(   that are sent on the load-generating connections.) s
5 660 M
(   Below the transport layer many places have a potential queue build-) s
5 649 M
(   up.  It is important to keep these queues at reasonable sizes or that) s
5 638 M
(   they implement techniques like FQ-Codel.  Depending on the techniques) s
5 627 M
(   used at these layers, the queue build-up can influence latency on) s
5 616 M
(   probes sent on load-generating connections as well as separate) s
5 605 M
(   connections.  If flow-queuing is used at these layers, the impact on) s
5 594 M
(   separate connections will be negligible.) s
5 572 M
(5.1.2.  Network influence) s
5 550 M
(   The network obviously is a large driver for the responsiveness) s
5 539 M
(   result.  Propagation delay from the client to the server as well as) s
5 528 M
(   queuing in the bottleneck node will cause latency.  Beyond these) s
5 517 M
(   traditional sources of latency, other factors may influence the) s
5 506 M
(   results as well.  Many networks deploy transparent TCP Proxies,) s
5 495 M
(   firewalls doing deep packet-inspection, HTTP "accelerators",... As) s
5 484 M
(   the methodology relies on the use of HTTP/2, the responsiveness) s
5 473 M
(   metric will be influenced by such devices as well.) s
5 451 M
(   The network will influence both kinds of latency probes that the) s
5 440 M
(   responsiveness tests sends out.  Depending on the network's use of) s
5 429 M
(   Smart Queue Management and whether this includes flow-queuing or not,) s
5 418 M
(   the latency probes on the load-generating connections may be) s
5 407 M
(   influenced differently than the probes on the separate connections.) s
5 385 M
(5.1.3.  Server side influence) s
5 363 M
(   Finally, the server-side introduces the same kind of influence on the) s
5 352 M
(   responsiveness as the client-side, with the difference that the) s
5 341 M
(   responsiveness will be impacted during the downlink load generation.) s
5 319 M
(5.2.  Root-causing Responsiveness) s
5 297 M
(   Once a responsiveness result has been generated one might be tempted) s
5 286 M
(   to try to localize the source of a potential low responsiveness.  The) s
5 275 M
(   responsiveness measurement is however aimed at providing a quick,) s
5 264 M
(   top-level view of the responsiveness under working conditions the way) s
5 253 M
(   end-users experience it.  Localizing the source of low responsiveness) s
5 242 M
(   involves however a set of different tools and methodologies.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 16]) s
_R
S
%%Page: (17) 17
%%BeginPageSetup
_S
24 24 translate
/pagenum 17 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   Nevertheless, the Responsiveness Test allows to gain some insight) s
5 726 M
(   into what the source of the latency is.  The previous section) s
5 715 M
(   described the elements that influence the responsiveness.  From there) s
5 704 M
(   it became apparent that the latency measured on the load-generating) s
5 693 M
(   connections and the latency measured on separate connections may be) s
5 682 M
(   different due to the different elements.) s
5 660 M
(   For example, if the latency measured on separate connections is much) s
5 649 M
(   less than the latency measured on the load-generating connections, it) s
5 638 M
(   is possible to narrow down the source of the additional latency on) s
5 627 M
(   the load-generating connections.  As long as the other elements of) s
5 616 M
(   the network don't do flow-queueing, the additional latency must come) s
5 605 M
(   from the queue build-up at the HTTP and TCP layer.  This is because) s
5 594 M
(   all other bottlenecks in the network that may cause a queue build-up) s
5 583 M
(   will be affecting the load-generating connections as well as the) s
5 572 M
(   separate latency probing connections in the same way.) s
5 550 M
(6.  Responsiveness Test Server API) s
5 528 M
(   The responsiveness measurement is built upon a foundation of standard) s
5 517 M
(   protocols: IP, TCP, TLS, HTTP/2.  On top of this foundation, a) s
5 506 M
(   minimal amount of new \342\\200\\234protocol\342\\200\\235 is defined, merely specifying the) s
5 495 M
(   URLs that used for GET and PUT in the process of executing the test.) s
5 473 M
(   Both the client and the server MUST support HTTP/2 over TLS.  The) s
5 462 M
(   client MUST be able to send a GET request and a POST.  The server) s
5 451 M
(   MUST be able to respond to both of these HTTP commands.  The server) s
5 440 M
(   MUST have the ability to provide content upon a GET request.  The) s
5 429 M
(   server MUST use a packet scheduling algorithm that minimizes internal) s
5 418 M
(   queueing to avoid affecting the client's measurement.) s
5 396 M
(   As clients and servers become deployed that use L4S congestion) s
5 385 M
(   control \(e.g., TCP Prague with ECT\(1\) packet marking\), for their) s
5 374 M
(   normal traffic when it is available, and fall back to traditional) s
5 363 M
(   loss-based congestion controls \(e.g., Reno or CUBIC\) otherwise, the) s
5 352 M
(   same strategy SHOULD be used for Responsiveness Test traffic.  This) s
5 341 M
(   is RECOMMENDED so that the synthetic traffic generated by the) s
5 330 M
(   Responsiveness Test mimics real-world traffic for that server.) s
5 308 M
(   Delay-based congestion-control algorithms \(e.g., Vegas, FAST, BBR\)) s
5 297 M
(   SHOULD NOT be used for Responsiveness Test traffic because they take) s
5 286 M
(   much longer to discover the depth of the bottleneck buffers.  Delay-) s
5 275 M
(   based congestion-control algorithms seek to mitigate the effects of) s
5 264 M
(   bufferbloat, by detecting and responding to early signs of increasing) s
5 253 M
(   round-trip delay, and reducing the amount of data they have in flight) s
5 242 M
(   before the bottleneck buffer fills up and overflows.  In a world) s
5 231 M
(   where bufferbloat is common, this is a pragmatic mitigation to allow) s
5 220 M
(   software to work better in that environment.  However, that approach) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 17]) s
_R
S
%%Page: (18) 18
%%BeginPageSetup
_S
24 24 translate
/pagenum 18 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   does not fix the underlying problem of bufferbloat; it merely avoids) s
5 726 M
(   it in some cases, and allows the problem in the network to persist.) s
5 715 M
(   For a diagnostic tool made to identify symptoms of bufferbloat in the) s
5 704 M
(   network so that they can be fixed, using a transport protocol) s
5 693 M
(   explicitly designed to mask those symptoms would be a poor choice,) s
5 682 M
(   and would require the test to run for much longer to deliver the same) s
5 671 M
(   results.) s
5 649 M
(   The server MUST respond to 4 URLs:) s
5 627 M
(   1.  A "small" URL/response: The server must respond with a status) s
5 616 M
(       code of 200 and 1 byte in the body.  The actual message content) s
5 605 M
(       is irrelevant.  The server SHOULD specify the content-type as) s
5 594 M
(       application/octet-stream.  The server SHOULD minimize the size,) s
5 583 M
(       in bytes, of the response fields that are encoded and sent on the) s
5 572 M
(       wire.) s
5 550 M
(   2.  A "large" URL/response: The server must respond with a status) s
5 539 M
(       code of 200 and a body size of at least 8GB.  The server SHOULD) s
5 528 M
(       specify the content-type as application/octet-stream.  The body) s
5 517 M
(       can be bigger, and may need to grow as network speeds increases) s
5 506 M
(       over time.  The actual message content is irrelevant.  The client) s
5 495 M
(       will probably never completely download the object, but will) s
5 484 M
(       instead close the connection after reaching working condition and) s
5 473 M
(       making its measurements.) s
5 451 M
(   3.  An "upload" URL/response: The server must handle a POST request) s
5 440 M
(       with an arbitrary body size.  The server should discard the) s
5 429 M
(       payload.  The actual POST message content is irrelevant.  The) s
5 418 M
(       client will probably never completely upload the object, but will) s
5 407 M
(       instead close the connection after reaching working condition and) s
5 396 M
(       making its measurements.) s
5 374 M
(   4.  A .well-known URL [RFC8615] which contains configuration) s
5 363 M
(       information for the client to run the test \(See Section 7,) s
5 352 M
(       below.\)) s
5 330 M
(   The client begins the responsiveness measurement by querying for the) s
5 319 M
(   JSON [RFC8259] configuration.  This supplies the URLs for creating) s
5 308 M
(   the load-generating connections in the upstream and downstream) s
5 297 M
(   direction as well as the small object for the latency measurements.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 18]) s
_R
S
%%Page: (19) 19
%%BeginPageSetup
_S
24 24 translate
/pagenum 19 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(7.  Responsiveness Test Server Discovery) s
5 715 M
(   It makes sense for a service provider \(either an application service) s
5 704 M
(   provider like a video conferencing service or a network access) s
5 693 M
(   provider like an ISP\) to host Responsiveness Test Server instances on) s
5 682 M
(   their network so customers can determine what to expect about the) s
5 671 M
(   quality of their connection to the service offered by that provider.) s
5 660 M
(   However, when a user performs a Responsiveness Test and determines) s
5 649 M
(   that they are suffering from poor responsiveness during the) s
5 638 M
(   connection to that service, the logical next questions might be,) s
5 616 M
(   1.  "What's causing my poor performance?") s
5 594 M
(   2.  "Is it poor buffer management by my ISP?") s
5 572 M
(   3.  "Is it poor buffer management in my home Wi-Fi Access point?") s
5 550 M
(   4.  "Something to do with the service provider?") s
5 528 M
(   5.  "Something else entirely?") s
5 506 M
(   To help an end user answer these questions, it will be useful for) s
5 495 M
(   test clients to be able to easily discover Responsiveness Test Server) s
5 484 M
(   instances running in various places in the network \(e.g., their home) s
5 473 M
(   router, their Wi-Fi access point, their ISP's head-end equipment,) s
5 462 M
(   etc\).) s
5 440 M
(   Consider this example scenario: A user has a cable modem service) s
5 429 M
(   offering 100 Mb/s download speed, connected via gigabit Ethernet to) s
5 418 M
(   one or more Wi-Fi access points in their home, which then offer) s
5 407 M
(   service to Wi-Fi client devices at different rates depending on) s
5 396 M
(   distance, interference from other traffic, etc.  By having the cable) s
5 385 M
(   modem itself host a Responsiveness Test Server instance, the user can) s
5 374 M
(   then run a test between the cable modem and their computer or) s
5 363 M
(   smartphone, to help isolate whether bufferbloat they are experiencing) s
5 352 M
(   is occurring in equipment inside the home \(like their Wi-Fi access) s
5 341 M
(   points\) or somewhere outside the home.) s
5 319 M
(7.1.  Well-Known Uniform Resource Identifier \(URI\) For Test Server) s
5 308 M
(      Discovery) s
5 286 M
(   Any organization that wishes to host their own instance of a) s
5 275 M
(   Responsiveness Test Server can advertise that capability by hosting) s
5 264 M
(   at the network quality well-known URI a resource whose content type) s
5 253 M
(   is application/json and contains a valid JSON object meeting the) s
5 242 M
(   following criteria:) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 19]) s
_R
S
%%Page: (20) 20
%%BeginPageSetup
_S
24 24 translate
/pagenum 20 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   {) s
5 726 M
(     "version": 1,) s
5 715 M
(     "urls": {) s
5 704 M
(       "large_download_url":"https://nq.example.com/api/v1/large",) s
5 693 M
(       "small_download_url":"https://nq.example.com/api/v1/small",) s
5 682 M
(       "upload_url":        "https://nq.example.com/api/v1/upload") s
5 671 M
(     }) s
5 660 M
(     "test_endpoint": "hostname123.provider.com") s
5 649 M
(   }) s
5 627 M
(   The server SHALL specify the content-type of the resource at the) s
5 616 M
(   well-known URI as application/json.) s
5 594 M
(   The content of the "version" field SHALL be "1".  Integer values) s
5 583 M
(   greater than "1" are reserved for future versions of this protocol.) s
5 572 M
(   The content of the "large_download_url", "small_download_url", and) s
5 561 M
(   "upload_url" SHALL all be validly formatted "http" or "https" URLs.) s
5 550 M
(   See above for the semantics of the fields.  All of the fields in the) s
5 539 M
(   sample configuration are required except "test_endpoint".  If the) s
5 528 M
(   test server provider can pin all of the requests for a test run to a) s
5 517 M
(   specific host in the service \(for a particular run\), they can specify) s
5 506 M
(   that host name in the "test_endpoint" field.) s
5 484 M
(   For purposes of registration of the well-known URI [RFC8615], the) s
5 473 M
(   application name is "nq".  The media type of the resource at the) s
5 462 M
(   well-known URI is "application/json" and the format of the resource) s
5 451 M
(   is as specified above.  The URI scheme is "https".  No additional) s
5 440 M
(   path components, query strings or fragments are valid for this well-) s
5 429 M
(   known URI.) s
5 407 M
(7.2.  DNS-Based Service Discovery for Test Server Discovery) s
5 385 M
(   To further aid the test client in discovering instances of the) s
5 374 M
(   Responsiveness Test Server, organizations wishing to host their own) s
5 363 M
(   instances of the Test Server MAY advertise their availability using) s
5 352 M
(   DNS-Based Service Discovery [RFC6763] using conventional, unicast DNS) s
5 341 M
(   [RFC1034] or multicast DNS [RFC6762] on the organization network's) s
5 330 M
(   local link\(s\).) s
5 308 M
(   The Responsiveness Test Service instances should advertise using the) s
5 297 M
(   service type [RFC6335] "_nq._tcp".  Population of the appropriate DNS) s
5 286 M
(   zone with the relevant unicast discovery records can be performed) s
5 275 M
(   automatically using a Discovery Proxy [RFC8766], or in some scenarios) s
5 264 M
(   simply by having a human administrator manually enter the required) s
5 253 M
(   records.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 20]) s
_R
S
%%Page: (21) 21
%%BeginPageSetup
_S
24 24 translate
/pagenum 21 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(7.2.1.  Example) s
5 715 M
(   An obscure service provider hosting a Responsiveness Test Server) s
5 704 M
(   instance for their organization \(obs.cr\) on the "rpm.obs.cr" host) s
5 693 M
(   would return the following answers to PTR and SRV conventional DNS) s
5 682 M
(   queries:) s
5 660 M
(   $ nslookup -q=ptr _nq._tcp.obs.cr.) s
5 649 M
(   Non-authoritative answer:) s
5 638 M
(   _nq._tcp.obs.crname = rpm._nq._tcp.obs.cr.) s
5 627 M
(   $ nslookup -q=srv rpm._nq._tcp.obs.cr.) s
5 616 M
(   Non-authoritative answer:) s
5 605 M
(   rpm._nq._tcp.obs.crservice = 0 0 443 rpm.obs.cr.) s
5 583 M
(   Given those conventional DNS query responses, the client would) s
5 572 M
(   proceed to access the rpm.obs.cr host on port 443 at the .well-known/) s
5 561 M
(   nq well-known URI to begin the test.) s
5 539 M
(8.  Security Considerations) s
5 517 M
(   TBD) s
5 495 M
(9.  IANA Considerations) s
5 473 M
(   IANA has been requested to record the service type \342\\200\\234_nq._tcp\342\\200\\235) s
5 462 M
(   \(Network Quality\) for advertising and discovery of Responsiveness) s
5 451 M
(   Test Server instances.) s
5 429 M
(10.  Acknowledgments) s
5 407 M
(   Special thanks go to Jeroen Schickendantz for his tireless) s
5 396 M
(   enthousiasm around the project and his contributions to this I-D and) s
5 385 M
(   the development of the Go responsiveness measurement tool.  We would) s
5 374 M
(   also like to thank Rich Brown for his editorial pass over this I-D.) s
5 363 M
(   We also thank Erik Auerswald, Matt Matthis and Omer Shapira for their) s
5 352 M
(   constructive feedback on the I-D.) s
5 330 M
(11.  Informative References) s
5 308 M
(   [Bufferbloat]) s
5 297 M
(              Gettys, J. and K. Nichols, "Bufferbloat: Dark Buffers in) s
5 286 M
(              the Internet", Communications of the ACM, Volume 55,) s
5 275 M
(              Number 1 \(2012\) , n.d..) s
5 253 M
(   [draft-ietf-tcpm-rfc793bis]) s
5 242 M
(              Eddy, W., "Transmission Control Protocol \(TCP\)) s
5 231 M
(              Specification", Internet Engineering Task Force , n.d..) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 21]) s
_R
S
%%Page: (22) 22
%%BeginPageSetup
_S
24 24 translate
/pagenum 22 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   [RFC0793]  Postel, J., "Transmission Control Protocol", RFC 793,) s
5 726 M
(              DOI 10.17487/RFC0793, September 1981,) s
5 715 M
(              <https://www.rfc-editor.org/rfc/rfc793>.) s
5 693 M
(   [RFC1034]  Mockapetris, P., "Domain names - concepts and facilities",) s
5 682 M
(              STD 13, RFC 1034, DOI 10.17487/RFC1034, November 1987,) s
5 671 M
(              <https://www.rfc-editor.org/rfc/rfc1034>.) s
5 649 M
(   [RFC6335]  Cotton, M., Eggert, L., Touch, J., Westerlund, M., and S.) s
5 638 M
(              Cheshire, "Internet Assigned Numbers Authority \(IANA\)) s
5 627 M
(              Procedures for the Management of the Service Name and) s
5 616 M
(              Transport Protocol Port Number Registry", BCP 165,) s
5 605 M
(              RFC 6335, DOI 10.17487/RFC6335, August 2011,) s
5 594 M
(              <https://www.rfc-editor.org/rfc/rfc6335>.) s
5 572 M
(   [RFC6762]  Cheshire, S. and M. Krochmal, "Multicast DNS", RFC 6762,) s
5 561 M
(              DOI 10.17487/RFC6762, February 2013,) s
5 550 M
(              <https://www.rfc-editor.org/rfc/rfc6762>.) s
5 528 M
(   [RFC6763]  Cheshire, S. and M. Krochmal, "DNS-Based Service) s
5 517 M
(              Discovery", RFC 6763, DOI 10.17487/RFC6763, February 2013,) s
5 506 M
(              <https://www.rfc-editor.org/rfc/rfc6763>.) s
5 484 M
(   [RFC8033]  Pan, R., Natarajan, P., Baker, F., and G. White,) s
5 473 M
(              "Proportional Integral Controller Enhanced \(PIE\): A) s
5 462 M
(              Lightweight Control Scheme to Address the Bufferbloat) s
5 451 M
(              Problem", RFC 8033, DOI 10.17487/RFC8033, February 2017,) s
5 440 M
(              <https://www.rfc-editor.org/rfc/rfc8033>.) s
5 418 M
(   [RFC8259]  Bray, T., Ed., "The JavaScript Object Notation \(JSON\) Data) s
5 407 M
(              Interchange Format", STD 90, RFC 8259,) s
5 396 M
(              DOI 10.17487/RFC8259, December 2017,) s
5 385 M
(              <https://www.rfc-editor.org/rfc/rfc8259>.) s
5 363 M
(   [RFC8290]  Hoeiland-Joergensen, T., McKenney, P., Taht, D., Gettys,) s
5 352 M
(              J., and E. Dumazet, "The Flow Queue CoDel Packet Scheduler) s
5 341 M
(              and Active Queue Management Algorithm", RFC 8290,) s
5 330 M
(              DOI 10.17487/RFC8290, January 2018,) s
5 319 M
(              <https://www.rfc-editor.org/rfc/rfc8290>.) s
5 297 M
(   [RFC8615]  Nottingham, M., "Well-Known Uniform Resource Identifiers) s
5 286 M
(              \(URIs\)", RFC 8615, DOI 10.17487/RFC8615, May 2019,) s
5 275 M
(              <https://www.rfc-editor.org/rfc/rfc8615>.) s
5 253 M
(   [RFC8766]  Cheshire, S., "Discovery Proxy for Multicast DNS-Based) s
5 242 M
(              Service Discovery", RFC 8766, DOI 10.17487/RFC8766, June) s
5 231 M
(              2020, <https://www.rfc-editor.org/rfc/rfc8766>.) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 22]) s
_R
S
%%Page: (23) 23
%%BeginPageSetup
_S
24 24 translate
/pagenum 23 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   [RFC9330]  Briscoe, B., Ed., De Schepper, K., Bagnulo, M., and G.) s
5 726 M
(              White, "Low Latency, Low Loss, and Scalable Throughput) s
5 715 M
(              \(L4S\) Internet Service: Architecture", RFC 9330,) s
5 704 M
(              DOI 10.17487/RFC9330, January 2023,) s
5 693 M
(              <https://www.rfc-editor.org/rfc/rfc9330>.) s
5 671 M
(Appendix A.  Example Server Configuration) s
5 649 M
(   This section shows fragments of sample server configurations to host) s
5 638 M
(   an responsiveness measurement endpoint.) s
5 616 M
(A.1.  Apache Traffic Server) s
5 594 M
(   Apache Traffic Server starting at version 9.1.0 supports) s
5 583 M
(   configuration as a responsiveness server.  It requires the generator) s
5 572 M
(   and the statichit plugin.) s
5 550 M
(   The sample remap configuration file then is:) s
5 528 M
(   map https://nq.example.com/api/v1/config \\) s
5 517 M
(       http://localhost/ \\) s
5 506 M
(       @plugin=statichit.so \\) s
5 495 M
(       @pparam=--file-path=config.example.com.json \\) s
5 484 M
(       @pparam=--mime-type=application/json) s
5 462 M
(   map https://nq.example.com/api/v1/large \\) s
5 451 M
(       http://localhost/cache/8589934592/ \\) s
5 440 M
(       @plugin=generator.so) s
5 418 M
(   map https://nq.example.com/api/v1/small \\) s
5 407 M
(       http://localhost/cache/1/ \\) s
5 396 M
(       @plugin=generator.so) s
5 374 M
(   map https://nq.example.com/api/v1/upload \\) s
5 363 M
(       http://localhost/ \\) s
5 352 M
(       @plugin=generator.so) s
5 330 M
(Authors' Addresses) s
5 308 M
(   Christoph Paasch) s
5 297 M
(   Apple Inc.) s
5 286 M
(   One Apple Park Way) s
5 275 M
(   Cupertino, California 95014,) s
5 264 M
(   United States of America) s
5 253 M
(   Email: cpaasch@apple.com) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 23]) s
_R
S
%%Page: (24) 24
%%BeginPageSetup
_S
24 24 translate
/pagenum 24 def
/fname (draft-ietf-ippm-responsiveness.txt) def
/fdir (.) def
/ftail (draft-ietf-ippm-responsiveness.txt) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
5 770 M
(Internet-Draft   Responsiveness under Working Conditions      March 2023) s
5 737 M
(   Randall Meyer) s
5 726 M
(   Apple Inc.) s
5 715 M
(   One Apple Park Way) s
5 704 M
(   Cupertino, California 95014,) s
5 693 M
(   United States of America) s
5 682 M
(   Email: rrm@apple.com) s
5 649 M
(   Stuart Cheshire) s
5 638 M
(   Apple Inc.) s
5 627 M
(   One Apple Park Way) s
5 616 M
(   Cupertino, California 95014,) s
5 605 M
(   United States of America) s
5 594 M
(   Email: cheshire@apple.com) s
5 561 M
(   Will Hawkins) s
5 550 M
(   University of Cincinnati) s
5 539 M
(   Email: hawkinwh@ucmail.uc.edu) s
5 176 M
(Paasch, et al.          Expires 17 September 2023              [Page 24]) s
_R
S
%%Trailer
%%Pages: 24
%%DocumentNeededResources: font Courier-Bold Courier 
%%EOF
